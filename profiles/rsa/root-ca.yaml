# =============================================================================
# RSA Root CA Certificate Profile
# =============================================================================
#
# Usage: Autorité de certification racine (trust anchor) - legacy
#
# La Root CA est le point d'ancrage de la confiance de toute la PKI.
# RSA 4096 offre une compatibilité maximale avec les systèmes legacy.
#
# Note: Pour les nouveaux déploiements, ECDSA P-384 est préféré
# (signatures plus petites, vérification plus rapide).
#
# Standards: RFC 5280 (X.509), CA/Browser Forum Baseline Requirements
#
# Exemple d'initialisation:
#   pki init-ca --profile rsa/root-ca \
#     --cn "ACME Root CA" \
#     --org "ACME Industrie" \
#     --country "FR"
#
# =============================================================================

name: rsa/root-ca
description: "Root CA RSA 4096-bit (legacy compatibility)"

# -----------------------------------------------------------------------------
# Subject DN (Distinguished Name)
# -----------------------------------------------------------------------------
# Pour une Root CA, le DN est fixé dans le profile.
#
subject:
  fixed:
    cn: "ACME Root CA RSA"
    o: "ACME Industrie"
    c: "FR"

# -----------------------------------------------------------------------------
# Algorithme de signature
# -----------------------------------------------------------------------------
# RSA 4096 bits pour Root CA (sécurité long terme).
#
signature:
  required: true
  mode: simple
  algorithms:
    primary: rsa-4096         # RSA 4096 bits pour Root

encryption:
  required: false
  mode: none
  algorithms: {}

validity: 7300d               # 20 ans

# -----------------------------------------------------------------------------
# Extensions X.509
# -----------------------------------------------------------------------------
extensions:

  basicConstraints:
    critical: true
    ca: true
    pathLen: 1                # Peut signer des AC avec pathLen=0

  keyUsage:
    critical: true
    values:
      - keyCertSign
      - cRLSign

  certificatePolicies:
    critical: false
    policies:
      - oid: "2.5.29.32.0"    # anyPolicy
        cps: "https://pki.acme-industrie.fr/cps"
        userNotice: "ACME Industrie Root Certificate Policy (RSA)"

  # ---------------------------------------------------------------------------
  # Name Constraints (optionnel mais recommandé)
  # ---------------------------------------------------------------------------
  # nameConstraints:
  #   critical: true
  #   permitted:
  #     dns: [".acme-industrie.fr"]
  #     email: [".acme-industrie.fr"]

  # Note: Pas de CDP ni AIA pour Root CA (auto-signée)
