# Thales Luna Network HSM Configuration
#
# Prerequisites:
#   - Luna Client software installed
#   - Network connectivity to HSM appliance
#   - Partition configured with appropriate policies
#
# Usage:
#   export HSM_PIN="partition-password"
#   qpki ca init --hsm-config ./thales-luna.yaml --key-label "root-ca-key" ...

type: pkcs11

pkcs11:
  # Luna Client PKCS#11 library
  # Linux:   /usr/lib/libCryptoki2_64.so
  # Windows: C:\Program Files\SafeNet\LunaClient\cryptoki.dll
  lib: /usr/lib/libCryptoki2_64.so

  # Token identification (choose one)
  token: "CA-Partition"       # By label (recommended)
  # token_serial: "ABC123"    # By serial number
  # slot: 0                   # By slot ID (less portable)

  # PIN via environment variable (partition password)
  pin_env: HSM_PIN
