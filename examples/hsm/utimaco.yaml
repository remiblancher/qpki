# Utimaco SecurityServer HSM Configuration
#
# Prerequisites:
#   - Utimaco CryptoServer client installed
#   - HSM configured and accessible
#   - User/slot configured
#
# Usage:
#   export HSM_PIN="user-pin"
#   qpki ca init --hsm-config ./utimaco.yaml --key-label "root-ca-key" ...

type: pkcs11

pkcs11:
  # Utimaco PKCS#11 library
  # Linux:   /opt/utimaco/p11/libcs_pkcs11_R3.so
  # Windows: C:\Program Files\Utimaco\CryptoServer\Lib\cs_pkcs11_R3.dll
  lib: /opt/utimaco/p11/libcs_pkcs11_R3.so

  # Token identification (choose one)
  token: "CA-Token"           # By label (recommended)
  # token_serial: "ABC123"    # By serial number
  # slot: 0                   # By slot ID (less portable)

  # PIN via environment variable
  pin_env: HSM_PIN
